<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    
    <record id="mail_act_meeting_rooms_approval" model="mail.activity.type">
        <field name="name">Meeting Rooms</field>
        <field name="icon">fa-sun-o</field>
        <field name="res_model_id" ref="meeting_rooms.model_meeting_rooms"/>
    </record>

    <record id="meeting_rooms_calendar_view" model="ir.ui.view">
        <field name="name">meeting_rooms_calendar_view</field>
        <field name="model">meeting.rooms</field>
        <field name="arch" type="xml">
            <calendar string="Meeting Date" date_start="start_date" date_stop="end_date" mode="day" quick_add="False" event_open_popup="False" color="room_location">
                <field name="room_location"/>
                <field name="subject"/>
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="attendee"/>
                <field name="state"/>
            </calendar>
        </field>
    </record>

    <record id="meeting_rooms_tree_view" model="ir.ui.view">
        <field name="name">meeting_rooms_tree_view</field>
        <field name="model">meeting.rooms</field>
        <field name="arch" type="xml">
            <tree string="Meeting Room Booking" create="0" delete="0" edit="0">
                <field name="subject"/>
                <field name="room_location"/>
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="attendee" widget="many2many_tags"/>
                <field name="description"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="meeting_rooms_from_view" model="ir.ui.view">
        <field name="name">meeting_rooms_from_view</field>
        <field name="model">meeting.rooms</field>
        <field name="arch" type="xml">
            <form string="Meeting Rooms Booking" create="0" delete="0" edit="0">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,cancel"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="subject"/>
                            <field name="room_location" widget="selection"/>
                            <field name="description"/>
                            <field name="calendar_alarm" widget="selection"/>
                            <field name="recurrency"/>
                        </group>
                        
                        <group>
                            <label for="start_date" string="Start Time"/>
                            <div>
                                <field name="start_date" widget="datetime" class="oe_inline"/>
                                <div class="mt-1">
                                    <i class="fa fa-globe" style="color: #00A09D;"/> 
                                    <span style="font-weight: bold; color: #00A09D;">UTC: </span>
                                    <field name="start_date_utc_str" readonly="1" nolabel="1" class="oe_inline" style="font-weight: bold; color: #00A09D;"/>
                                </div>
                            </div>

                            <label for="end_date" string="End Time"/>
                            <div>
                                <field name="end_date" widget="datetime" class="oe_inline"/>
                                <div class="mt-1">
                                    <i class="fa fa-clock-o" style="color: #00A09D;"/> 
                                    <span style="font-weight: bold; color: #00A09D;">UTC: </span>
                                    <field name="end_date_utc_str" readonly="1" nolabel="1" class="oe_inline" style="font-weight: bold; color: #00A09D;"/>
                                </div>
                            </div>

                            <separator string="Timezone Breakdown" colspan="2"/>
                            <field name="multi_timezone_display" nolabel="1" colspan="2"/>

                            <field name="attendee" widget="many2many_tags" colspan="2"/>
                            <button name="create_calendar_web" type="object" string="Send Email &amp; Download ICS" class="oe_highlight" icon="fa-envelope"/>
                        </group>
                    </group>

                    <group>
                        <field name="create_uid" string="Initiator"/>
                        <field name="create_date" string="Create Date"/>
                    </group>

                    <notebook>
                        <page attrs="{'invisible': [('recurrency', '=', False)]}" string="Recurrence">
                            <group>
                                <group>
                                    <field name="rrule_type"/>
                                </group>
                                <group>
                                    <field name="final_date"/>
                                </group>
                            </group>
                        </page>
                        <page string="IT Settings" groups="base.group_system">
                            <group>
                                <group>
                                    <field name="version"/>
                                </group>
                                <group>
                                    <field name="calendar_file"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                    <field name="activity_ids" widget="mail_activity"/>
                </div>
            </form>
        </field>
    </record>

    <record id="room_location_form_view" model="ir.ui.view">
        <field name="name">room.location.form.view</field>
        <field name="model">room.location</field>
        <field name="arch" type="xml">
            <form string="Room Booking">
                <sheet>
                    <group>
                        <group>
                            <field name="name" placeholder="e.g. Ruang Meeting Utama"/>
                            <field name="tz" required="1" options="{'no_create': True, 'no_open': True}" placeholder="Select Timezone (e.g. Asia/Jakarta)"/>
                            <field name="location_address"/>
                            <field name="location_description"/>
                            <field name="active"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="room_location_tree_view" model="ir.ui.view">
        <field name="name">room_location.tree.view</field>
        <field name="model">room.location</field>
        <field name="arch" type="xml">
            <tree string="Room Locations">
                <field name="name"/>
                <field name="location_address"/>
                <field name="location_description"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_room_location">
        <field name="name">Room Locations</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">room.location</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record model="ir.actions.act_window" id="action_meeting_rooms_readonly_final">
        <field name="name">Booked Rooms (Read Only)</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">meeting.rooms</field>
        <field name="view_mode">calendar,tree,form</field>
        <field name="context">{'create': False, 'delete': False, 'edit': False, 'no_quick_create': True}</field>
    </record>

    <menuitem name="Meeting System" id="menu_meeting_rooms" sequence="60"/>
    <record id="menu_meeting_rooms" model="ir.ui.menu">
        <field name="action" eval="False"/>
    </record>

    <menuitem name="Booked Rooms List" id="menu_meeting_rooms_list_readonly" parent="menu_meeting_rooms" action="action_meeting_rooms_readonly_final" sequence="100"/>
              
    <menuitem name="Room Locations" id="menu_room_locations" parent="menu_meeting_rooms" action="action_room_location" groups="approvals.group_approval_user" sequence="110"/>
    
</odoo>